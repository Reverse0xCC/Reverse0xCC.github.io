---
layout: page
title: "二进制安全环境搭建过程"
date: 2026-02-18 00:00:00 -0000
---

> 换了新电脑，打算从零开始重新搭建一个干净的环境，事不宜迟，开工吧。

## 安装 VMWare Workstation
首先，Linux环境是必不可少的。在这里我使用`VMWare Workstation`作为虚拟机平台。
访问官方下载网址<https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion>，点击 **DOWNLOAD NOW** ：
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/cbd9536b-444d-4d78-8185-8b4f42df7dfa" />

跳转到BROADCOM的登录页面，输入账号密码登录
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/11a8c14c-b3ee-4529-be0d-89268fdc73c0" />

登录后跳转到该页面
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/25a300f7-1e58-4d1a-869e-326af94914d2" />

此时再次回到<https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion>，再次点击 **DOWNLOAD NOW** ，跳转到以下界面
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/aa5cf067-57b3-4619-a825-176e5af2f1cf" />

注意到页面上的 "Free Software Downloads available [HERE](https://support.broadcom.com/group/ecx/free-downloads)"，点击[HERE](https://support.broadcom.com/group/ecx/free-downloads)跳转
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/48f58c86-c19f-427d-8d2b-a9998aefb81b" />

向下滚动，找到`VMWare Workstation Pro`
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/642750aa-cf0a-429c-8154-c96ac5153191" />

点击`VMware Workstation Pro 25H2 for Windows`，在下拉列表中点击[25H2](https://support.broadcom.com/group/ecx/productfiles?subFamily=VMware%20Workstation%20Pro&displayGroup=VMware%20Workstation%20Pro%2025H2%20for%20Windows&release=25H2&os=&servicePk=&language=EN&freeDownloads=true)：
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/151c069c-174d-4558-8175-8a972935deea" />

点击后跳转到了以下页面
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/1234fc9d-c2df-4851-b2d4-1a457862eb33" />

这里需要先点击"I agree to the [Terms and Conditions](https://www.broadcom.com/company/legal/licensing)"中的"[Terms and Conditions](https://www.broadcom.com/company/legal/licensing)"，然后勾选左侧的方框，随后便可点击下载按钮
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/a302fca0-9808-49df-9e4e-0d0a9e005032" />

弹出确认窗口，点击`Yes`
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/0b78a2e5-3532-4dfb-838e-d9e46836141b" />

弹出一个表单，必填字段随便输入一点内容即可，之后点击`Submit`
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/50446669-f456-4a5a-8ff0-2df3053b8db2" />

提交表单以后，会重新跳转到之前的下载页面，此时再次点击下载图标即可
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/59d268d1-7f7e-4aa9-9644-8e0f5f19a480" />

走完一大堆流程以后，终于开始下载了……（到底为什么设计得这么繁琐？）
<img width="693" height="216" alt="image" src="https://github.com/user-attachments/assets/2e81df14-c338-41f7-a6eb-5cb1a04c65e5" />

千辛万苦得到了安装程序，接下来只要运行安装程序就可以了
<img width="990" height="784" alt="image" src="https://github.com/user-attachments/assets/203d2ed6-2a69-426e-8019-5439a8a275f1" />

前几步直接点`Next`即可，后面可以考虑更改安装路径。我这里直接使用默认路径
<img width="990" height="784" alt="image" src="https://github.com/user-attachments/assets/e6161fd3-d0d9-4182-8b17-19679cfefc88" />

这里两个选项是默认勾选的。第一个是`自动检查更新`，第二个是`加入用户体验改进计划`，我全部取消勾选
<img width="990" height="784" alt="image" src="https://github.com/user-attachments/assets/56099aa0-7c02-4efb-aca0-b41490e76f63" />

接下来选择是否创建快捷方式。第一个选项是`桌面快捷方式`，第二个选项是`开始菜单`。这里我只创建桌面快捷方式
<img width="990" height="784" alt="image" src="https://github.com/user-attachments/assets/c754776e-c1f2-4724-b0c8-e89dfecc871f" />

之后点击`Install`，就能开始安装。

安装完成了，看到桌面上已经出现了`VMware Workstation Pro`的快捷方式
<img width="3200" height="2000" alt="image" src="https://github.com/user-attachments/assets/cfa014c4-4e0b-419c-814a-aeeb39f4a965" />

我将该快捷方式改名为`VM`，移动到了我自己创建的存放快捷方式的路径中
<img width="3200" height="2000" alt="image" src="https://github.com/user-attachments/assets/f17d6371-fdf8-4fe6-9234-62a5b8a0de3d" />

我将这个存放快捷方式的路径添加到了Path环境变量中，因此在`运行(Win+R)`窗口中，输入`VM`即可启动
<img width="799" height="420" alt="image" src="https://github.com/user-attachments/assets/9acc8a8c-4221-4418-b327-34d4e9e6b8b6" />

终于打开VMWare Workstation了（鼓掌）
<img width="2378" height="1380" alt="image" src="https://github.com/user-attachments/assets/f771ef64-4482-4134-8d75-a017d751b458" />

接下来创建虚拟机。
首先需要有一个Linux镜像。
找到Ubuntu官方的下载网址：<https://ubuntu.com/download/desktop>，下载`Ubuntu 24.04.4 LTS`
<img width="3184" height="1736" alt="image" src="https://github.com/user-attachments/assets/e062cb30-0a7d-47b4-b12d-610330856e7c" />

点击`DOWNLOAD`以后，浏览器毫不含糊地执行了下载任务。和前面下载VMWare Workstation的复杂流程形成了鲜明对比
<img width="836" height="438" alt="image" src="https://github.com/user-attachments/assets/74fa0c3e-0553-4aaf-87e4-c6eda294ac86" />

下载好镜像以后，点击中间的`Create a New Virtual Machine`
<img width="2378" height="1380" alt="image" src="https://github.com/user-attachments/assets/c31297d4-72a8-466f-a40a-a0b2ca79c2f1" />

我不需要复杂的自定义配置，因此选择`Typical`模式即可
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/be5a8220-1767-41f6-8b16-87cff2ed91e2" />

首先添加镜像，选择自己刚刚安装的Ubuntu 24.04.4镜像
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/86495a62-405c-4b6d-8028-93065bb73f67" />

接下来设置系统机器名称、用户名、密码。注意用户名只能包含小写字母和数字
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/acbf292c-c6b0-417e-870a-9982e5dc82a5" />

设置虚拟机名称（用于在VMWare Workstation中显示），以及虚拟机在主机上的存储路径。为了规避一些可能出现的麻烦，我设置路径时避开了所有特殊字符
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/60dc32aa-7910-494a-b240-8dc51b5d0dcb" />

之后是很关键的一步，设置虚拟磁盘大小上限。我以前在这方面吃过亏，一开始设置了20GB的大小，后来发现20GB不够用，还得想办法扩容，步骤非常繁琐，注意事项很多。
而虚拟磁盘在本机上占据的磁盘空间，与虚拟磁盘中实际存放的数据大小有关。哪怕设置了很大的容量上限，只要没有往里面放大量的文件，同样不会占据那么多的磁盘空间。
因此我直接大手一挥把容量上限设置为100GB，基本能够免除扩容烦恼。
另一个选项，是选择将虚拟磁盘存储为单个文件，还是分成多个文件存储。存储为多个文件唯一的好处就是方便复制虚拟机，但却会降低大容量磁盘的性能。
我个人选择将磁盘存储为单个文件。因为我很少需要复制虚拟机。就算真的需要复制，拿一个128GB容量的exFAT格式的U盘也完全没问题。
重要文件通常我都会在主机备份，毕竟我曾经吃到过虚拟机无法开机的教训……到时候再想办法读取vmdk，倒又给自己平添麻烦了。
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/a446ce3c-e328-4915-8d5f-bc18afdbffa8" />

之后可以确认选择的配置信息。点击`Customize Hardware...`做进一步的调整：
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/9518430a-3fb9-4eba-b9b6-2ca15e180cf3" />

下图可以看到，VMWare Workstation默认设置2处理器、1核心。我不知道默认设置究竟用意如何，但我的物理机上只有一个CPU，16核心。
<img width="1513" height="1400" alt="image" src="https://github.com/user-attachments/assets/8e66c7ba-a813-423b-b648-763364c4be22" />
<img width="1569" height="1169" alt="image" src="https://github.com/user-attachments/assets/60a9f0d0-b744-450b-852d-fe540e6ab9b0" />

经过资料查询，在物理机只有一个CPU时，最好将处理器数量设置为1。核心数量则需要考虑虚拟机与主机之间的资源平衡。综合考虑，我将其设置为1处理器，6核心。
<img width="1513" height="1400" alt="image" src="https://github.com/user-attachments/assets/3a63e5ea-c3ae-49cd-9c86-aa0dafc2ceb3" />

下面还有三个虚拟化引擎(Virtualization engine)的选项。其中第一、三个选项均可提高虚拟机的性能与安全性。第二个选项则仅用于性能监控、分析，通常无需开启
<img width="1513" height="1400" alt="image" src="https://github.com/user-attachments/assets/c4217e57-c0ab-4242-987c-155e2e90d32c" />

接下来转到`Memory`选项卡设置运行内存大小。默认设置为4GB，但是我的电脑有32GB运行内存，闲着也是闲着，所以我给虚拟机分配了8GB运行内存。
<img width="1513" height="1400" alt="image" src="https://github.com/user-attachments/assets/a06ed706-8465-4d79-a317-ec595001f191" />

`Network Adapter`中默认使用NAT模式，无需修改，直接跳过。

`USB Controller`选项卡中，可以将`USB compatibility`从默认的`USB 2.0`修改为`USB 3.2`，支持更高的USB传输速度。
<img width="1513" height="1400" alt="image" src="https://github.com/user-attachments/assets/f6410631-b2c8-49fc-9135-4c8207cf1825" />

万事俱备，关闭界面最后检查一次配置，就可以点击`Finish`了。之后VMWare Workstation会自动启动虚拟机，进入系统安装配置流程。
<img width="856" height="836" alt="image" src="https://github.com/user-attachments/assets/0e44f00b-ae2e-41dc-8ccf-346ede09b278" />

（VMWare Workstation下方的提示说是Easy Install，实际上还得你自己动手走完流程）

哪怕VMWare Workstation的窗口已经最大化了，虚拟机的屏幕还是在中间小小一个。
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/5b64206e-2de9-4eac-a987-880a99e4a6d6" />

但是点击这个`Free stretch`按钮，就可以将界面扩大至整个窗口。
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/1b13058d-c6fe-4161-83b7-77c8be9ed1c5" />

再按F9，就可以关闭左边的侧边栏
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/aae28053-a2e2-4549-861c-2282eea35f15" />

事实上还有个全屏模式，但是我不习惯用，就这样吧。

选择语言时，最好使用默认的`English`。因为更改语言可能会产生一些莫名其妙的兼容性问题（虽然其实也很少出现，只是以防万一吧）
既然英语也不影响使用，那就直接用英语了。

安装流程前面的步骤我都检查过了，都没什么好修改的，直接一路点`Next`就行了。

之后这里需要设置用户名和机器名称。按喜好设置即可。机器名最好改短一点，不然以后在终端输入命令时，每次都面对着长长一串开头，没输入多少字符就自动换行了。
默认勾选的`Require my password to log in`最好关掉。主机登录已经需要密码了，虚拟机登录再输一次密码，完全就是给自己添堵。
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/b943b0f9-36e4-4117-b588-bc0b5031f188" />

接下来的选项就没有需要修改的了，一路快进即可。

（快速等待.gif）
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/91c83723-ddec-471e-b19d-ad63f42ef5a5" />

终于安装完成了，接下来需要重启虚拟机。
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/d97f3d7d-99a6-4775-8a06-cbbd626632c3" />

重启之后还要完成OOBE
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/2a2b979e-b709-4d44-83f8-d661f4c30191" />

Ubuntu Pro，用不着
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/ad37c110-5f1e-4b00-92b9-3b753a27b4e7" />

遥测，直接关掉
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/0b4c4e8e-1cf1-4325-81d4-9ea615ca1a45" />

应用，不装
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/436fe8dc-dd2e-468a-913a-529775785619" />

系统安装完成啦。Ubuntu就是简洁
<img width="3200" height="1904" alt="image" src="https://github.com/user-attachments/assets/0897a9b5-a642-4cdf-adf1-1ba626f2695d" />
